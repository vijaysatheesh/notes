flowchart TB
    %% =====================
    %% CORES
    %% =====================
    M7[Cortex-M7<br/>480 MHz]
    M4[Cortex-M4<br/>240 MHz]

    %% =====================
    %% HIGH SPEED BUS
    %% =====================
    AXI[AXI Bus<br/>64-bit]

    %% =====================
    %% BUS MATRICES
    %% =====================
    AXIMAT[AXI Bus Matrix]
    AHBMAT[AHB Bus Matrix]

    %% =====================
    %% MEMORY
    %% =====================
    ITCM[ITCM<br/>Instruction TCM]
    DTCM[DTCM<br/>Data TCM]
    SRAM_D1[SRAM D1]
    SRAM_D2[SRAM D2]
    SRAM_D3[SRAM D3]
    FLASH[Internal Flash]
    QSPI[QSPI / OCTOSPI]
    FMC[FMC<br/>External SDRAM]

    %% =====================
    %% AHB PERIPHERALS
    %% =====================
    DMA[DMA / BDMA]
    GPIO[GPIO]
    ETH[Ethernet]
    USB[USB OTG]

    %% =====================
    %% APB BUSES
    %% =====================
    APB1[APB1]
    APB2[APB2]
    APB3[APB3]
    APB4[APB4]

    %% =====================
    %% APB PERIPHERALS
    %% =====================
    TIM[Timers]
    UART[USART / UART]
    SPI[SPI / I2C]
    ADC[ADC / DAC]
    RTC[RTC / Backup]

    %% =====================
    %% CORE CONNECTIONS
    %% =====================
    M7 --> AXI
    AXI --> AXIMAT

    M7 --> ITCM
    M7 --> DTCM

    M4 --> AHBMAT

    %% =====================
    %% AXI CONNECTIONS
    %% =====================
    AXIMAT --> SRAM_D1
    AXIMAT --> FLASH
    AXIMAT --> QSPI
    AXIMAT --> FMC
    AXIMAT --> AHBMAT

    %% =====================
    %% AHB CONNECTIONS
    %% =====================
    AHBMAT --> SRAM_D2
    AHBMAT --> SRAM_D3
    AHBMAT --> DMA
    AHBMAT --> GPIO
    AHBMAT --> ETH
    AHBMAT --> USB

    %% =====================
    %% APB BRIDGES
    %% =====================
    AHBMAT --> APB1
    AHBMAT --> APB2
    AHBMAT --> APB3
    AHBMAT --> APB4

    %% =====================
    %% APB PERIPHERALS
    %% =====================
    APB1 --> TIM
    APB1 --> UART

    APB2 --> SPI
    APB2 --> ADC

    APB3 --> RTC
    APB4 --> TIM
